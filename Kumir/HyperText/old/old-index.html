<HTML>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Гипертекстовый учебник Кумир</title>
  <script type="text/javascript" src="../httpd.js"></script>

<script type="text/javascript">
	function gvA() {
		document.values.A.value = val('main', '', 'а');
	}

	function gvC() {
		document.values.C.value = val('main', '', 'с');
	}
</script>

</head>

<BODY>

<h1 align=center>Гипертекстовый учебник</h1>

<h2 align=center>1. Общие сведения. </h2>

<h3>1.1 Запуск</h3>

<p>
Для открытия гипертекстового учебника в Web-браузере достаточно выбрать пункт главного меню Кумира <b>"Инструменты" - "Гипертекстовый учебник"</b>.<br>
После этого запускается Web-браузер, используемый по умолчанию, и в нём открывается файл <i><b>ht\index.html</b> (путь указан относительно директории Кумира)</i>, который и содержит "корень" учебника. Учебник может читаться любым браузером, поддерживающим выполнение скриптов JavaScript.
</p>

<p><i>Замечание.</i> При выполнении описанных выше действий внутри системы Кумир стартует HTTP-сервер (по умолчанию на порту 4243). Кроме того, как независимое от Кумира приложение, запускается внешний Web-браузер; в браузере открывается страница <b>http://localhost:<i>номер_порта</i></b>.
Эта страница связана с указанным выше файлом.
</p>

<h3>1.2. Файлы гипертекстового учебника.</h3>

<p>
Файлы гипертекстового учебника (далее -- учебника) располагаются в подкаталоге <b>ht</b> основного каталога системы КуМир; ниже этот подкаталог называется <i>каталогом учебника</i>.
При создании учебника допускается использование файлов следующих видов:
<ul>
<li>HTML-файлы;</li>
<li>файлы, содержащие выполнимые скрипты на языке JavaScript (далее -- js-файлы);</li> 
<li>другие файлы необходимые для работы, например, обстановки Робота для примеров из учебника.</li> 
</ul>

<i>Замечание.</i> Учебник может располагаться и вне подкаталога <b>ht</b>. Путь к каталогу с файлами учебника можно задавать в окне настроек Кумира, на вкладке "Каталоги и файлы".
</p>

<h3>1.3. Основной скрипт.</h3>
<p>
Один из js-файлов (<b>httpd.js</b>)- служебный. Этот файл содержит скрипты, необходимые для организации пересылки сообщений между браузером и запущенным Кумиром. Присутствие этого файла в каталоге гипертекста обязательно.

Основной скрипт должен быть подключен к каждому HTML-файлу учебника с помощью строки в заголовке (head) HTML-файла:<br>
<b><code>&lt;script type="text/javascript" src="httpd.js"&gt;&lt;/script&gt;</code></b><br>
</p>
<p> При необходимости расширить набор возможностей взаимодействия браузера с системой КуМир, список функций, описанных в файле <b>httpd.js</b> может быть дополнен. Набор функций, реализованных в версии от 10.07.09 описан ниже в разделе 2.
</p>

<h3>1.4. Создание новых гипертекстовых страниц</h3>
Для создания новых гипертекстов необходимо:
<ol>
<li>Создать страницу на языке HTML.</li>
<li>Включить в заголовке этой страницы использование файла <b>httpd.js</b>. См. выше.</li>
<li>Подготовить текст страницы. Для реализации управления системой Кумир используйте функции JavaScript, описанные в файле <b>httpd.js</b>. Подробнее см. ниже. </li>
<li>Сохранить страницу в подкаталог с гипертекстами Кумира (например, под именем xxx1.html).</li>
<li>Открыть полученную страницу в браузере можно по адресу <b>http://localhost:<i>номер_порта</i>/xxx1.html</b>. Этот адрес можно непосредственно ввести в адресную строку браузера либо использовать в качестве гиперссылки. </li>
</ol>

<h2 align=center> 2. Функции, описанные в файле httpd.js</h2>
Для каждой функции кратко описывается ее смысл (если он неясен из заголовка подраздела), приводится описание вызова. 
Кроме того, реализована кнопка, вызывающая соответствующее действие.</br>
При чтении этого текста рекомендуется нажимать на соответствующие кнопки. 

<h3>Проверить соединение с Кумиром</h3>

<a href="javascript:checkConnect()">Нажмите эту ссылку для проверки</a>

<h3>Установить текст программы в редакторе Кумира</h3>

<p><font size=+1><i>Вызов:</i> <code>setProgramText(text)</code></font></p>
<p><font size=+1>Параметр вызова <code>text</code> -- текст программы.</font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="setProgramText('алг\nнач\nцел а\nа:=7+8\nлит с\nс := \'лайла\'\nввд\nвывод 2+3\nкон\n\nалг ввд\nнач\nвывод 12345, нс\nкон\n'); return false;"> Ввести текст программы </BUTTON>
</FORM>

<h3>Открыть файл с текстом программы в Кумире</h3>

<p><font size=+1><i>Вызов:</i> <code>setProgramFile(file)</code></font></p>
<p><font size=+1>Параметр вызова <code>file</code> -- имя файла с программой. Имя файла задается относительно каталога HTML-файла.</font></p>

<p>
Пример:<br>
<BUTTON TYPE="SUBMIT" onClick="setProgramFile('example.kum'); return false;"> Открыть файл с программой </BUTTON>

<h3>Выполнить программу в Кумире</h3>

<p><font size=+1><i>Вызов:</i> <code>runProgram()</code></font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="runProgram(); return false;"> Выполнить непрерывно</BUTTON>
</FORM>


<h3>Сделать большой ШАГ выполнения</h3>

<p><font size=+1><i>Вызов:</i> <code>STEP()</code></font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="STEP(); return false;"> ШАГ </BUTTON>
</FORM>


<h3>Сделать маленький шаг выполнения</h3>

<p><font size=+1><i>Вызов:</i> <code>step()</code></font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="step(); return false;"> шаг </BUTTON>
</FORM>


<h3>Выполнить алгоритм</h3>

<p><font size=+1><i>Вызов:</i> <code>runAlg(name)</code></font></p>
<p><font size=+1>Параметр вызова <code>name</code> -- имя алгоритма.</font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="runAlg('ввд'); return false;"> Выполнить алгоритм "ввд" </BUTTON>
</FORM> 

<h3>Вернуть значение переменной</h3>

<p><font size=+1><i>Вызов:</i> <code>val(module, alg, name)</code></font></p>

<p>
Параметры вызова:
<ul>
<li><code>module</code> -- имя исполнителя</li>
<li><code>alg</code> -- имя алгоритма</li>
<li><code>name</code> -- имя переменной</li>
</ul>
</p>

<FORM name="values">
Пример 1: <a href="javascript:gvA()">Значение "а"</a> <input type="text" name="A">
<br>
Пример 2: <a href="javascript:gvC()">Значение "с"</a> <input type="text" name="C">
</FORM> 

<h3>Остановить выполнение</h3>

<p><font size=+1><i>Вызов:</i> <code>stop()</code></font></p>

<FORM>
Пример: <BUTTON TYPE="SUBMIT" onClick="stop(); return false;"> Прервать </BUTTON>
</FORM> 

<h3>Установить обстановку Робота</h3>

<p><font size=+1><i>Вызов:</i> <code>setRobotField(file)</code></font></p>
<p><font size=+1>Параметр вызова <code>file</code> -- имя файла с обстановкой. Имя файла задается относительно каталога HTML-файла.</font></p>

<p>
Пример:<br>
<a href="" onClick="setRobotField('ris.fil'); return false;">Установить обстановку</a> 
<a href="" onClick="setProgramText('использовать Робот\nалг\nнач\nкон\n'); return false;">Задать текст программы</a> 
<a href="" onClick="runProgram(); return false;">Выполнить программу</a> 
</p>

</BODY>
</HTML>
